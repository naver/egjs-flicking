{"version":3,"file":"all.esm.js","sources":["../src/Parallax.ts","../src/Fade.ts","../src/index.ts"],"sourcesContent":["import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\nexport default class Parallax implements Plugin {\n  constructor(private selector, private scale = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n  }\n  public destory(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent) => {\n    const flicking = e.currentTarget;\n    const panels = flicking.getVisiblePanels();\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n\n      panel.update(el => {\n        const target = el.querySelector<HTMLElement>(this.selector)!;\n        const parentTarget = target.parentNode as Element;\n        const rect = target.getBoundingClientRect();\n        const parentRect = parentTarget.getBoundingClientRect();\n        const position = (rect.width - parentRect.width) / 2 * progress * this.scale;\n\n        target.style.transform = `translate(-50%) translate(${position}px)`;\n      });\n    });\n  }\n}\n","import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\nexport default class Fade implements Plugin {\n  constructor(private selector, private scale = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n  }\n  public destory(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent) => {\n    const flicking = e.currentTarget;\n    const panels = flicking.getVisiblePanels();\n    const selector = this.selector;\n    const scale = this.scale;\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n\n      panel.update(el => {\n        const target = selector ? el.querySelector<HTMLElement>(selector)! : el;\n        const opacity = Math.min(1, Math.max(0, (1 - Math.abs(progress * scale))));\n\n        target.style.opacity = `${opacity}`;\n      });\n    });\n  }\n}\n","import Parallax from \"./Parallax\";\nimport Fade from \"./Fade\";\n\nexport default {\n  Parallax,\n  Fade,\n};\n"],"names":["selector","scale","e","flicking","currentTarget","panels","getVisiblePanels","forEach","panel","progress","outsetProgress","update","el","target","querySelector","_this","parentTarget","parentNode","rect","getBoundingClientRect","parentRect","position","width","style","transform","on","onMove","off","opacity","Math","min","max","abs","Parallax","Fade"],"mappings":";;;;;;;;AAEA;;;mBACE,CAAoBA,QAApB,EAAsCC,KAAtC;wBAAsC,EAAA;MAAAA,SAAA;;;oBAAtC;;iBAAoB,GAAAD,QAAA;cAAkB,GAAAC,KAAA;;eAO9B,GAAS,UAACC,CAAD;UACTC,QAAQ,GAAGD,CAAC,CAACE,aAAnB;UACMC,MAAM,GAAGF,QAAQ,CAACG,gBAAT,EAAf;MAEAD,MAAM,CAACE,OAAP,CAAe,UAAAC,KAAA;YACPC,QAAQ,GAAGD,KAAK,CAACE,cAAvB;QAEAF,KAAK,CAACG,MAAN,CAAa,UAAAC,EAAA;cACLC,MAAM,GAAGD,EAAE,CAACE,aAAH,CAA8BC,KAAI,CAACf,QAAnC,CAAf;cACMgB,YAAY,GAAGH,MAAM,CAACI,UAA5B;cACMC,IAAI,GAAGL,MAAM,CAACM,qBAAP,EAAb;cACMC,UAAU,GAAGJ,YAAY,CAACG,qBAAb,EAAnB;cACME,QAAQ,GAAG,CAACH,IAAI,CAACI,KAAL,GAAaF,UAAU,CAACE,KAAzB,IAAkC,CAAlC,GAAsCb,QAAtC,GAAiDM,KAAI,CAACd,KAAvE;UAEAY,MAAM,CAACU,KAAP,CAAaC,SAAb,GAAyB,+BAA6BH,QAA7B,QAAzB;SAPF;OAHF;KAJM;;;;;cAND,GAAP,UAAYlB,QAAZ;IACEA,QAAQ,CAACsB,EAAT,CAAY,MAAZ,EAAoB,KAAKC,MAAzB;GADK;;iBAGA,GAAP,UAAevB,QAAf;IACEA,QAAQ,CAACwB,GAAT,CAAa,MAAb,EAAqB,KAAKD,MAA1B;GADK;;iBAqBT;GA1BA;;ACAA;;;eACE,CAAoB1B,QAApB,EAAsCC,KAAtC;wBAAsC,EAAA;MAAAA,SAAA;;;oBAAtC;;iBAAoB,GAAAD,QAAA;cAAkB,GAAAC,KAAA;;eAO9B,GAAS,UAACC,CAAD;UACTC,QAAQ,GAAGD,CAAC,CAACE,aAAnB;UACMC,MAAM,GAAGF,QAAQ,CAACG,gBAAT,EAAf;UACMN,QAAQ,GAAGe,KAAI,CAACf,QAAtB;UACMC,KAAK,GAAGc,KAAI,CAACd,KAAnB;MAEAI,MAAM,CAACE,OAAP,CAAe,UAAAC,KAAA;YACPC,QAAQ,GAAGD,KAAK,CAACE,cAAvB;QAEAF,KAAK,CAACG,MAAN,CAAa,UAAAC,EAAA;cACLC,MAAM,GAAGb,QAAQ,GAAGY,EAAE,CAACE,aAAH,CAA8Bd,QAA9B,CAAH,GAA8CY,EAArE;cACMgB,OAAO,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAa,IAAIF,IAAI,CAACG,GAAL,CAASvB,QAAQ,GAAGR,KAApB,CAAjB,CAAZ,CAAhB;UAEAY,MAAM,CAACU,KAAP,CAAaK,OAAb,GAAuB,KAAGA,OAA1B;SAJF;OAHF;KANM;;;;;cAND,GAAP,UAAYzB,QAAZ;IACEA,QAAQ,CAACsB,EAAT,CAAY,MAAZ,EAAoB,KAAKC,MAAzB;GADK;;iBAGA,GAAP,UAAevB,QAAf;IACEA,QAAQ,CAACwB,GAAT,CAAa,MAAb,EAAqB,KAAKD,MAA1B;GADK;;aAoBT;GAzBA;;ACCA,YAAe;EACbO,QAAQ,UADK;EAEbC,IAAI;CAFN;;;;"}