{"version":3,"file":"all.js","sources":["../src/Parallax.ts","../src/Fade.ts","../src/index.ts"],"sourcesContent":["import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\nexport default class Parallax implements Plugin {\n  constructor(private selector, private scale = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n  }\n  public destory(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent) => {\n    const flicking = e.currentTarget;\n    const panels = flicking.getVisiblePanels();\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n\n      panel.update(el => {\n        const target = el.querySelector<HTMLElement>(this.selector)!;\n        const parentTarget = target.parentNode as Element;\n        const rect = target.getBoundingClientRect();\n        const parentRect = parentTarget.getBoundingClientRect();\n        const position = (rect.width - parentRect.width) / 2 * progress * this.scale;\n\n        target.style.transform = `translate(-50%) translate(${position}px)`;\n      });\n    });\n  }\n}\n","import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\nexport default class Fade implements Plugin {\n  constructor(private selector, private scale = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n  }\n  public destory(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent) => {\n    const flicking = e.currentTarget;\n    const panels = flicking.getVisiblePanels();\n    const selector = this.selector;\n    const scale = this.scale;\n\n    panels.forEach(panel => {\n      const progress = panel.outsetProgress;\n\n      panel.update(el => {\n        const target = selector ? el.querySelector<HTMLElement>(selector)! : el;\n        const opacity = Math.min(1, Math.max(0, (1 - Math.abs(progress * scale))));\n\n        target.style.opacity = `${opacity}`;\n      });\n    });\n  }\n}\n","import Parallax from \"./Parallax\";\nimport Fade from \"./Fade\";\n\nexport default {\n  Parallax,\n  Fade,\n};\n"],"names":["selector","scale","e","flicking","currentTarget","panels","getVisiblePanels","forEach","panel","progress","outsetProgress","update","el","target","querySelector","_this","parentTarget","parentNode","rect","getBoundingClientRect","parentRect","position","width","style","transform","on","onMove","off","opacity","Math","min","max","abs","Parallax","Fade"],"mappings":";;;;;;;;;;;;;;EAEA;;;EACE,mBAAA,CAAoBA,QAApB,EAAsCC,KAAtC;EAAsC,wBAAA,EAAA;EAAAA,MAAAA,SAAA;;;EAAtC,oBAAA;;EAAoB,iBAAA,GAAAD,QAAA;EAAkB,cAAA,GAAAC,KAAA;;EAO9B,eAAA,GAAS,UAACC,CAAD;EACf,UAAMC,QAAQ,GAAGD,CAAC,CAACE,aAAnB;EACA,UAAMC,MAAM,GAAGF,QAAQ,CAACG,gBAAT,EAAf;EAEAD,MAAAA,MAAM,CAACE,OAAP,CAAe,UAAAC,KAAA;EACb,YAAMC,QAAQ,GAAGD,KAAK,CAACE,cAAvB;EAEAF,QAAAA,KAAK,CAACG,MAAN,CAAa,UAAAC,EAAA;EACX,cAAMC,MAAM,GAAGD,EAAE,CAACE,aAAH,CAA8BC,KAAI,CAACf,QAAnC,CAAf;EACA,cAAMgB,YAAY,GAAGH,MAAM,CAACI,UAA5B;EACA,cAAMC,IAAI,GAAGL,MAAM,CAACM,qBAAP,EAAb;EACA,cAAMC,UAAU,GAAGJ,YAAY,CAACG,qBAAb,EAAnB;EACA,cAAME,QAAQ,GAAG,CAACH,IAAI,CAACI,KAAL,GAAaF,UAAU,CAACE,KAAzB,IAAkC,CAAlC,GAAsCb,QAAtC,GAAiDM,KAAI,CAACd,KAAvE;EAEAY,UAAAA,MAAM,CAACU,KAAP,CAAaC,SAAb,GAAyB,+BAA6BH,QAA7B,QAAzB;EACD,SARD;EASD,OAZD;EAaD,KAjBO;EAP2C;;;;EAC5C,cAAA,GAAP,UAAYlB,QAAZ;EACEA,IAAAA,QAAQ,CAACsB,EAAT,CAAY,MAAZ,EAAoB,KAAKC,MAAzB;EACD,GAFM;;EAGA,iBAAA,GAAP,UAAevB,QAAf;EACEA,IAAAA,QAAQ,CAACwB,GAAT,CAAa,MAAb,EAAqB,KAAKD,MAA1B;EACD,GAFM;;EAqBT,iBAAA;EAAC,GA1BD;;ECAA;;;EACE,eAAA,CAAoB1B,QAApB,EAAsCC,KAAtC;EAAsC,wBAAA,EAAA;EAAAA,MAAAA,SAAA;;;EAAtC,oBAAA;;EAAoB,iBAAA,GAAAD,QAAA;EAAkB,cAAA,GAAAC,KAAA;;EAO9B,eAAA,GAAS,UAACC,CAAD;EACf,UAAMC,QAAQ,GAAGD,CAAC,CAACE,aAAnB;EACA,UAAMC,MAAM,GAAGF,QAAQ,CAACG,gBAAT,EAAf;EACA,UAAMN,QAAQ,GAAGe,KAAI,CAACf,QAAtB;EACA,UAAMC,KAAK,GAAGc,KAAI,CAACd,KAAnB;EAEAI,MAAAA,MAAM,CAACE,OAAP,CAAe,UAAAC,KAAA;EACb,YAAMC,QAAQ,GAAGD,KAAK,CAACE,cAAvB;EAEAF,QAAAA,KAAK,CAACG,MAAN,CAAa,UAAAC,EAAA;EACX,cAAMC,MAAM,GAAGb,QAAQ,GAAGY,EAAE,CAACE,aAAH,CAA8Bd,QAA9B,CAAH,GAA8CY,EAArE;EACA,cAAMgB,OAAO,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAa,IAAIF,IAAI,CAACG,GAAL,CAASvB,QAAQ,GAAGR,KAApB,CAAjB,CAAZ,CAAhB;EAEAY,UAAAA,MAAM,CAACU,KAAP,CAAaK,OAAb,GAAuB,KAAGA,OAA1B;EACD,SALD;EAMD,OATD;EAUD,KAhBO;EAP2C;;;;EAC5C,cAAA,GAAP,UAAYzB,QAAZ;EACEA,IAAAA,QAAQ,CAACsB,EAAT,CAAY,MAAZ,EAAoB,KAAKC,MAAzB;EACD,GAFM;;EAGA,iBAAA,GAAP,UAAevB,QAAf;EACEA,IAAAA,QAAQ,CAACwB,GAAT,CAAa,MAAb,EAAqB,KAAKD,MAA1B;EACD,GAFM;;EAoBT,aAAA;EAAC,GAzBD;;ACCA,cAAe;EACbO,EAAAA,QAAQ,UADK;EAEbC,EAAAA,IAAI;EAFS,CAAf;;;;;;;;"}